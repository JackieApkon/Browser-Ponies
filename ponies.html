<html>
<head>
<title>OMG Pwnies!</title>
<script type="text/javascript" src="ponycfg.js"></script>
<script type="text/javascript" src="browserponies.js"></script>

<script type="text/javascript">
function convertPonies () {
	try {
		var what = document.getElementById('what').value;
		var src = document.getElementById('input').value;
		var converted = what === 'Pony' ?
			BrowserPonies.convertPony(src, document.getElementById('baseurl').value) :
			BrowserPonies.convertInteractions(src);
		document.getElementById('output').value = JSON.stringify(converted);
	}
	catch (e) {
		console.error(e);
		alert("Error during Conversion:\n"+e.name+": "+e.message);
	}
}

function escapePonies () {
	try {
		var what = document.getElementById('what').value;
		var src = document.getElementById('input').value;
		document.getElementById('output').value = JSON.stringify(
			what === 'Pony' ?
				{ini: src, baseurl: document.getElementById('baseurl').value} :
				src);
	}
	catch (e) {
		console.error(e);
		alert("Error during Conversion:\n"+e.name+": "+e.message);
	}
}
</script>
</head>
<body>
<h1>OMG Pwnies!</h1>
<p>
<button onclick="BrowserPonies.start();">Start</button>
<button onclick="BrowserPonies.stop();">Stop</button>
<button onclick="BrowserPonies.pause();">Pause</button>
<button onclick="BrowserPonies.resume();">Resume</button>
</p>
<p>
<label for="input">Pony.ini / Interactions.ini:</label>
<select id="what" onchange="document.getElementById('baseurlcont').style.visibility = this.value === 'Pony' ? '' : 'hidden';">
<option selected="selected">Pony</option>
<option>Interactions</option>
</select>
<span id="baseurlcont"><label for="baseurl">Base URL:</label><input type="text" id="baseurl"/></span>
<br/>
<textarea id="input" cols="100" rows="15"></textarea>
</p>
<p>
<button onclick="escapePonies();">Escape</button>
<button onclick="convertPonies();">Convert</button>
</p>
<p>
<label for="output">BrowserPonies JSON:</label><br/>
<textarea id="output" cols="100" rows="15"></textarea>
</p>
</body>
</html>
